<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Purple Admin - Đánh giá tình nguyện viên</title>
    <!-- plugins:css -->
    <link
      rel="stylesheet"
      href="assets/vendors/mdi/css/materialdesignicons.min.css"
    />
    <link rel="stylesheet" href="assets/vendors/css/vendor.bundle.base.css" />
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="assets/css/style.css" />
    <!-- End layout styles -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Overpass:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="Evaluation.css" />
    <!-- Custom styles for evaluation page -->
  </head>
  <body>
    <div class="container-scroller">
      <!-- partial:partials/_navbar.html -->
      <nav
        class="navbar default-layout-navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row"
      >
        <div
          class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center"
        >
          <div class="navbar-brand brand-logo">
            <img
              src="./assets/images/VolunteerIcon.png"
              alt="Logo"
              class="navbar-logo"
            />
            <a class="navbar-title" href="index.html">DUTERS</a>
          </div>
        </div>
        <div class="navbar-menu-wrapper d-flex align-items-stretch">
          <button
            class="navbar-toggler navbar-toggler align-self-center"
            type="button"
            data-toggle="minimize"
          >
            <span class="mdi mdi-menu"></span>
          </button>
          <ul class="navbar-nav navbar-nav-right">
            <li class="nav-item nav-profile dropdown">
              <a
                class="nav-link dropdown-toggle"
                id="profileDropdown"
                href="#"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                <div class="nav-profile-img">
                  <img src="assets/images/faces/face1.jpg" alt="image" />
                  <span class="availability-status online"></span>
                </div>
                <div class="nav-profile-text">
                  <p class="mb-1 text-black">Trần Quốc Đạt</p>
                </div>
              </a>
              <div
                class="dropdown-menu navbar-dropdown"
                aria-labelledby="profileDropdown"
              >
                <a class="dropdown-item" href="#">
                  <i class="mdi mdi-cached me-2 text-success"></i> Activity Log
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">
                  <i class="mdi mdi-logout me-2 text-primary"></i> Signout
                </a>
              </div>
            </li>
          </ul>
          <button
            class="navbar-toggler navbar-toggler-right d-lg-none align-self-center"
            type="button"
            data-toggle="offcanvas"
          >
            <span class="mdi mdi-menu"></span>
          </button>
        </div>
      </nav>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_sidebar.html -->
        <nav class="sidebar sidebar-offcanvas" id="sidebar">
          <ul class="nav">
            <li class="nav-item nav-profile">
              <a href="#" class="nav-link">
                <div class="nav-profile-image">
                  <img src="assets/images/faces/face1.jpg" alt="profile" />
                  <span class="login-status online"></span>
                </div>
                <div class="nav-profile-text d-flex flex-column">
                  <span class="font-weight-bold mb-2">Trần Quốc Đạt</span>
                  <span class="text-secondary text-small">CEO</span>
                </div>
                <i
                  class="mdi mdi-bookmark-check text-success nav-profile-badge"
                ></i>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="index.html">
                <span class="menu-title">Dashboard</span>
                <i class="mdi mdi-view-dashboard menu-icon"></i>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="ManageEvent.html">
                <span class="menu-title">Events</span>
                <i class="mdi mdi-calendar-multiple menu-icon"></i>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="ManageVolunteer.html">
                <span class="menu-title">Volunteers</span>
                <i class="mdi mdi-account-group menu-icon"></i>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="ManageDonation.html">
                <span class="menu-title">Donation</span>
                <i class="mdi mdi-hand-heart menu-icon"></i>
              </a>
            </li>
            <li class="nav-item sidebar-actions">
              <span class="nav-link">
                <div class="border-bottom">
                  <h6 class="font-weight-normal mb-3">Events</h6>
                </div>
                <button class="btn btn-block btn-lg btn-gradient-primary mt-4">
                  + Add an Event
                </button>
              </span>
            </li>
          </ul>
        </nav>
        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">
            <div class="page-header">
              <h3 class="page-title">
                <span
                  class="page-title-icon bg-gradient-primary text-white me-2"
                >
                  <i class="mdi mdi-star-circle"></i>
                </span>
                Đánh giá tình nguyện viên
              </h3>
              <nav aria-label="breadcrumb">
                <ul class="breadcrumb">
                  <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                  <li class="breadcrumb-item active" aria-current="page">
                    Tạo đánh giá
                  </li>
                </ul>
              </nav>
            </div>

            <div class="row">
              <div class="col-md-8 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Tạo đánh giá mới</h4>
                    <form id="evaluationForm" class="forms-sample">
                      <div class="form-group">
                        <label for="volunteerSelect">Tình nguyện viên</label>
                        <select
                          class="form-control"
                          id="volunteerSelect"
                          required
                        >
                          <option value="">-- Chọn tình nguyện viên --</option>
                          <option value="VOL001">Nguyễn Văn A</option>
                          <option value="VOL002">Trần Thị B</option>
                          <option value="VOL003">Lê Văn C</option>
                        </select>
                      </div>

                      <div class="form-group">
                        <label for="eventSelect">Sự kiện</label>
                        <select class="form-control" id="eventSelect" required>
                          <option value="">-- Chọn sự kiện --</option>
                          <option value="EVT001">
                            Clean the Beach - 15/06/2023
                          </option>
                          <option value="EVT002">
                            Teaching Kids - 02/05/2023
                          </option>
                          <option value="EVT003">
                            Food Donation - 20/04/2023
                          </option>
                        </select>
                      </div>

                      <div class="form-group">
                        <label>Điểm đánh giá</label>
                        <div class="rating-container">
                          <div class="rating-stars">
                            <i class="mdi mdi-star-outline" data-rating="1"></i>
                            <i class="mdi mdi-star-outline" data-rating="2"></i>
                            <i class="mdi mdi-star-outline" data-rating="3"></i>
                            <i class="mdi mdi-star-outline" data-rating="4"></i>
                            <i class="mdi mdi-star-outline" data-rating="5"></i>
                          </div>
                          <input
                            type="hidden"
                            id="ratingValue"
                            name="rating"
                            required
                          />
                          <span id="ratingText" class="text-muted"
                            >Chưa đánh giá</span
                          >
                        </div>
                      </div>

                      <div class="form-group">
                        <label for="feedback">Nhận xét</label>
                        <textarea
                          class="form-control"
                          id="feedback"
                          rows="5"
                          placeholder="Nhập nhận xét về tình nguyện viên..."
                        ></textarea>
                      </div>

                      <div
                        class="form-check form-check-flat form-check-primary"
                      >
                        <label class="form-check-label">
                          <input
                            type="checkbox"
                            class="form-check-input"
                            id="isCompleted"
                            checked
                          />
                          Đã hoàn thành
                          <i class="input-helper"></i>
                        </label>
                      </div>

                      <button
                        type="submit"
                        class="btn btn-gradient-primary me-2"
                      >
                        <i class="mdi mdi-content-save"></i> Lưu đánh giá
                      </button>
                      <button type="button" class="btn btn-light">
                        <i class="mdi mdi-close"></i> Hủy bỏ
                      </button>
                    </form>
                  </div>
                </div>
              </div>

              <div class="col-md-4 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">Thông tin tình nguyện viên</h4>
                    <div class="volunteer-details">
                      <img
                        src="assets/images/faces/face1.jpg"
                        class="img-lg rounded-circle mb-3"
                        alt="profile"
                      />
                      <h4 id="volunteerName">--</h4>
                      <p class="text-muted" id="volunteerEmail">--</p>
                      <div
                        class="badge badge-outline-success"
                        id="volunteerRating"
                      >
                        Chưa có đánh giá
                      </div>
                    </div>

                    <div class="volunteer-history mt-4">
                      <h5>Lịch sử tham gia</h5>
                      <div class="table-responsive">
                        <table class="table">
                          <thead>
                            <tr>
                              <th>Sự kiện</th>
                              <th>Ngày</th>
                            </tr>
                          </thead>
                          <tbody id="eventHistory">
                            <tr>
                              <td colspan="2" class="text-center no-data">
                                Chưa có dữ liệu
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- content-wrapper ends -->
          <!-- partial:partials/_footer.html -->
          <footer class="footer">
            <div class="container-fluid d-flex justify-content-between">
              <span
                class="text-muted d-block text-center text-sm-start d-sm-inline-block"
                >Copyright © DUTERS 2023</span
              >
              <span class="float-none float-sm-end mt-1 mt-sm-0 text-end"
                >Version 1.0.0</span
              >
            </div>
          </footer>
          <!-- partial -->
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="assets/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <script src="assets/vendors/chart.js/Chart.min.js"></script>
    <script src="assets/js/jquery.cookie.js" type="text/javascript"></script>
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="assets/js/off-canvas.js"></script>
    <script src="assets/js/hoverable-collapse.js"></script>
    <script src="assets/js/misc.js"></script>
    <!-- endinject -->
    <!-- Custom js for evaluation page -->
    <script>
      $(document).ready(function () {
        // Xử lý rating bằng sao
        $(".rating-stars i")
          .hover(function () {
            const rating = $(this).data("rating");
            highlightStars(rating);
            $("#ratingText").text(rating + " sao");
          })
          .click(function () {
            const rating = $(this).data("rating");
            $("#ratingValue").val(rating);
            $(".rating-stars i")
              .removeClass("mdi-star")
              .addClass("mdi-star-outline");
            $(this)
              .prevAll()
              .andSelf()
              .removeClass("mdi-star-outline")
              .addClass("mdi-star");
          });

        $(".rating-stars").mouseleave(function () {
          const currentRating = $("#ratingValue").val();
          if (currentRating) {
            highlightStars(currentRating);
            $("#ratingText").text(currentRating + " sao");
          } else {
            $(".rating-stars i")
              .removeClass("mdi-star")
              .addClass("mdi-star-outline");
            $("#ratingText").text("Chưa đánh giá");
          }
        });

        function highlightStars(rating) {
          $(".rating-stars i")
            .removeClass("mdi-star")
            .addClass("mdi-star-outline");
          $(".rating-stars i")
            .slice(0, rating)
            .removeClass("mdi-star-outline")
            .addClass("mdi-star");
        }

        // Xử lý khi chọn tình nguyện viên
        $("#volunteerSelect").change(function () {
          const volunteerId = $(this).val();
          if (volunteerId) {
            // Giả lập API call
            setTimeout(() => {
              $("#volunteerName").text(
                $("#volunteerSelect option:selected").text()
              );
              $("#volunteerEmail").text(
                volunteerId.toLowerCase() + "@example.com"
              );
              $("#volunteerRating").text("4.5/5 (10 đánh giá)");

              // Giả lập lịch sử sự kiện
              $("#eventHistory").html(`
                <tr>
                  <td>Clean the Beach</td>
                  <td>15/06/2023</td>
                </tr>
                <tr>
                  <td>Teaching Kids</td>
                  <td>02/05/2023</td>
                </tr>
              `);
            }, 500);
          } else {
            resetVolunteerInfo();
          }
        });

        function resetVolunteerInfo() {
          $("#volunteerName").text("--");
          $("#volunteerEmail").text("--");
          $("#volunteerRating").text("Chưa có đánh giá");
          $("#eventHistory").html(
            '<tr><td colspan="2" class="text-center no-data">Chưa có dữ liệu</td></tr>'
          );
        }

        // Xử lý submit form
        $("#evaluationForm").submit(function (e) {
          e.preventDefault();

          // Validate form
          if (
            !$("#volunteerSelect").val() ||
            !$("#eventSelect").val() ||
            !$("#ratingValue").val()
          ) {
            alert("Vui lòng điền đầy đủ thông tin");
            return;
          }

          // Hiển thị thông báo thành công
          alert("Đánh giá đã được lưu thành công!");
          $("#evaluationForm")[0].reset();
          $(".rating-stars i")
            .removeClass("mdi-star")
            .addClass("mdi-star-outline");
          $("#ratingText").text("Chưa đánh giá");
          resetVolunteerInfo();
        });
      });
    </script>
  </body>
</html>
